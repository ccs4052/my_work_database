------------------------- РАБОТА С Базой данных
БД Помогает сделать сайт динамическим. Хранилище для информации. Сайт с административной частью что-бы менять контент сайта. БД имеет свой сервер.
Apach это не тот сервер базы данных есть еще и сервер БД а их соединяет ПХП с помощью языка MYSQL ( этот язык будет работат на любом сервере с базой данных даже Oracle БД).
MYSQL - реляционая - база с набором таблиц ( а тоблица из рядов столбцов и строк и на пересечении поле и строки только одно значение)
Сама база данных это обычный текстовый файл.
В настройках таблица  Index -> PRIMARY  - означает выставить в колонке ID что-бы ключи присваивались по порядку и A_I галочку ставим - Avto Incriment (авто увеличение)
Поле TYPE - нужно указать какой тип данных будет находиться в столбце ( цифры или дата и время и строки ) если не длиное слово то VARCHAR тип указываем
если в столбце номер телефона ( мы не знаем там будут цифры или цифры со знаками) поэтому тип поля VARCHAR.
Поле LengthValues (Длина Значения)если тип стоит (Type) Varchar то длину поля указываем 255
Тип таблицы MyISAM - если для номеров тел и фамилий таблица


--------Заполняем созданую таблица в SQl оператор INSERT
-Заходим в созданую таблицу и заходим в раздел Insert
-Для того что-бы использовать даные из таблицы заходим в закладку SQL,
и пишем команду INSERT - Добавить INTO test1()(название таблицы а в скобках название полей)
-VALUES ('')   - значения которые хотим добавить в(скобках значения которые хотим добавить и они должны быть в таком же порядке как и в команде INSERT значения столбцов в скобках)
пример       INSERT INTO test1 (name, age, phone) VALUES ('Пупкин', 25, '55555')

2-й способ добавления данных в таблицу.
Заходим в SQL и вводим команду 
SET - назначить

INSERT INTO test1 SET name='Иванов', age=40, phone='77777'  - name age phone - название полей таблици

---------------------ОПЕРАТОР SELECT - производим выборку данных
* - значит выбрать все
SELECT * FROM `test1` WHERE id=1     - id=1 это id первого столбца таблици
еще пример

SELECT name, age FROM `test1` WHERE phone='77777'   - показывает значение столбцов name и age у которых столбец phone равен 77777

SELECT * FROM `test1` - получить все из таблици test1


-----------------Операторы при помощи которых можно манипулировать данными таблици
UPDATE - оператор обновления данных
Например в нашей таблицу test1 с номерами телефона, у кого-то поменялся номер

UPDATE test1 SET phone='88888'  WHERE id=4 - поменять в таблицу test1 столбец с полем phone у столбца с id=4  (можно указывать не только столбец ID можно и любой другой главное что-бы в имени столбца мы указали элемент с названием которое лежит в нужной нам строке)


------------------ Оператор DELETE

DELETE FROM test1 WHERE id=3 - несмотря на то что мы удалили строку с ID =3 другие элементы сохраняют свои перозданые ID



--------------------РАБОТА с MySQL 

--Сначала нада соединиться с сервером localhost - обычно файл с подключением выносят в отдельный файл
--mysql_query() - отправляет запрос

---ЗАПРОС Отправляеться 2-мя методами

<?php
$res = mysql_query("SELECT * FROM test1"); //вызываем запросом все из таблици test1 - а что-бы было проще помещяем запрос в переменную ( с результатом будем работать)

?> 
и удобнее так

<?php
$query = "SELECT * FROM test1"; //- запрос помещяем в переменную
$res = mysql_query($query); //вызываем запросом все из таблици test1 - а что-бы было проще помещяем запрос в переменную ( с результатом будем работать)

?>

---
(файл1)
<?php
mysql_connect("localhost", "user", "111") or die("Нет подключения к серверу");  //соединение с сервером mysql оператор or использует команду die()(или exit) на случей если sql не отвечает - можно поместить подключение в переменную $conn для удобства
mysql_select_db("test") or die("Невозможно открыть базу данных");  // выбираем для работы нужную нам базу данных потому как их может быть несколько - если мы будем работать с несколькими базами данных их нужно поместить в переменую $db например и при запросе будем указывать переменную
mysql_query("SET NAMES utf8") or die("Не установлена кодировка"); // в какой кодировке мы отправляем запрос указываем такую кодировку в которая установлина в созданой таблице в БД

?>
<?php
(файл2 тут нада вызывать файл1)
$query = "SELECT * FROM test1"; //- запрос помещяем в переменную
//echo $query; удобно при отладке скрипта запроса мы видим что поменялось например
$res = mysql_query($query); //вызываем запросом все из таблици test1 - а что-бы было проще помещяем запрос в переменную ( с результатом будем работать)
$row = mysql_fetch_assoc($res);   //(делает массив по одной строке) функция которая делает асациативный массив из нашего содержимого таблици text1 где ключ вызывает содержимое ячейки
print_r ($row); // распечатываем новосозданный массив из нашей таблици test1

?>
-----------
Все значения моей таблици test1 выведены на экран в табличке 
<?php
(1)mysql_connect("localhost", "user", "111") or die("Нет подключения к серверу");  //соединение с сервером mysql оператор or использует команду die()(или exit) на случей если sql не отвечает - можно поместить подключение в переменную $conn для удобства
(2)mysql_select_db("test") or die("Невозможно открыть базу данных");  // выбираем для работы нужную нам базу данных потому как их может быть несколько - если мы будем работать с несколькими базами данных их нужно поместить в переменую $db например и при запросе будем указывать переменную
(3)mysql_query("SET NAMES utf8") or die("Не установлена кодировка"); //(устанавливаем кодировку соединения) в какой кодировке мы отправляем запрос указываем такую кодировку в которая установлина в созданой таблице в БД

?>
-----------------------
<?php
$query = "SELECT * FROM test1"; //либо можно такой запрос получить "SELECT * FROM test1 WHERE id<=4";
(4)$res = mysql_query($query); // отправляем запрос серверу БД
echo '<table border="1">'; //выводим табличку с границами
echo '<tr><td>Id</td><td>Name</td><td>Phone</td><td>Age</td>';//tr - строка td -ячейка
(5)while ($row = mysql_fetch_assoc($res)){        // если это выборка данных мы строим асациативный массив в цикле (пока строиться асациативный массив мы будем выводить данные)
    <td>".$row['id']."</td>
    <td>".$row['name']."</td>
    <td>".$row['phone']."</td>
    <td>".$row['age']."</td>
    </tr>"; //обращяемся к массиву $row и указываем элементы массива
}
echo '</table>';   //таблицу закрыли
?>


<?php
define ('DB','localhost');
define ('DBLOGIN','user');
define ('DBPASS','111');
define ('DBNAME','bogdan');

$connect = mysqli_connect(DB,DBLOGIN,DBPASS,DBNAME) or die(mysqli_error());
mysql_select_db(DBNAME);
    $login=sdf;
    $pass = dff;
    $passr = ddf;
    $email = fdffdf;
    $token = 66;
$query = mysqli_query($connect,"INSERT INTO capons VALUES('','$login','$pass','$email','$token')") or die(mysql_error());



-----------------------------

-------------ЕСЛИ НАДА Выбрать один элемент из таблици 

<?php
mysql_connect("localhost", "user", "111") or die("Нет подключения к серверу");  //соединение с сервером mysql оператор or использует команду die()(или exit) на случей если sql не отвечает - можно поместить подключение в переменную $conn для удобства
mysql_select_db("test") or die("Невозможно открыть базу данных");  // выбираем для работы нужную нам базу данных потому как их может быть несколько - если мы будем работать с несколькими базами данных их нужно поместить в переменую $db например и при запросе будем указывать переменную
mysql_query("SET NAMES utf8") or die("Не установлена кодировка"); // в какой кодировке мы отправляем запрос указываем такую кодировку в которая установлина в созданой таблице в БД

?>
<?php

$query = "SELECT name,phone FROM test1 WHERE id=4"; // если выбираем одну строчку из таблици ( выводим даные из столбца name и phone  с данными которые находятся в строке ID-4)
$res = mysql_query($query);
$row = mysql_fetch_assoc($res);          // поскольку берем одну запись из одной строки массив нам не нужен
echo "Полученное имя -".$row['name']; //выводим массив $row
echo "<br / >Телефон - ".$row['phone'];
?>

---
 Выводим на экран строку с ID=30 из двух элементов login и пасс
<?php
define ('DB','localhost');
define ('DBLOGIN','user');
define ('DBPASS','111');
define ('DBNAME','bogdan');

$connect = mysqli_connect(DB,DBLOGIN,DBPASS,DBNAME) or die(mysqli_error());
    $login=sdf;
    $pass = dff;
    $passr = ddf;
    $email = fdffdf;
    $token = 66;
$query = mysqli_query($connect,"SELECT login,pass FROM capons WHERE id=30");
$bog=mysqli_fetch_assoc($query);
echo $bog['login'];
echo '<br>';
echo $bog['pass'];






--------------ВЫБОРКА ДАННЫХ

<?php
mysql_connect("localhost", "user", "111") or die("Нет подключения к серверу");  //соединение с сервером mysql оператор or использует команду die()(или exit) на случей если sql не отвечает - можно поместить подключение в переменную $conn для удобства
mysql_select_db("test") or die("Невозможно открыть базу данных");  // выбираем для работы нужную нам базу данных потому как их может быть несколько - если мы будем работать с несколькими базами данных их нужно поместить в переменую $db например и при запросе будем указывать переменную
mysql_query("SET NAMES utf8") or die("Не установлена кодировка"); // в какой кодировке мы отправляем запрос указываем такую кодировку в которая установлина в созданой таблице в БД

?>
<?php
$name = "Двинин";
$phone = '99999';
$age = 29;
$query = "INSERT INTO test1 (name, phone, age) VALUES ('$name', '$phone', $age)";  //($query(переменная с запросом) добавим что-то в БД - указывает столбы таблици test1 в том порядке как они у нас в таблице есть - в VALUES указываем наши переменные которые мы хотим добавить
//echo $query;  //для теста выведем значение на экран что-бы посмотреть что мы добавили
mysql_query($query); //отправляем наш запрос к БД
?>



-----------------Сделать резервную копию БД сделаем ДАПБ БД
1 - Заходим на главную страницу PHP MyAdmin
2- Заходим в вкладку Export
3- и сохраняем БД на компьютере



----------------Достаем данные из запроса 

<?php
function wtf($x){
    echo '<pre>';
    print_r($x);
    echo '</pre>';
}
define ('DB','localhost');
define ('DBLOGIN','user');
define ('DBPASS','111');
define ('DBNAME','bogdan');
$connect = mysqli_connect(DB,DBLOGIN,DBPASS,DBNAME) or die(mysqli_error());
$res = mysqli_query($connect,"SELECT * FROM capons ORDER BY id") or die (mysqli_error());
$row = mysqli_fetch_assoc($res);
//wtf($row);     //рапечатываем строку таблици массивом
echo $row['pass']; // элемент массива

-------
А тут находим запись в определенном диапазоне

$connect = mysqli_connect(DB,DBLOGIN,DBPASS,DBNAME) or die(mysqli_error());
$res = mysqli_query($connect,"SELECT * FROM capons WHERE id > 50 ORDER BY id") or die (mysqli_error());
echo mysqli_num_rows($res);    //ФУНКЦИЯ показывает сколько записей было найдено диапозоном поиска




-------------------------ПОИСК ПО ТАБЛИЦЕ 
Если диапазон выполняеться то выводиться определеной элемент массива если нет то НЕТ ЗАПИСЕЙ

$connect = mysqli_connect(DB,DBLOGIN,DBPASS,DBNAME) or die(mysqli_error());
$res = mysqli_query($connect,"SELECT * FROM capons WHERE id < 10  ORDER BY id LIMIT 1") or die (mysqli_error());
if (mysqli_num_rows($res)){
    $row = mysqli_fetch_assoc($res);
    echo $row['pass'];
} else {
    echo 'Нет записей';
}



--------------ВЫВОДИМ ПО ВСЕМ СТРОКАМ ТАБЛИЦИ ОПРЕДЕЛЕННЫЕ ЯЧЕЙКИ С ПОМОЩЬЮ ЦИКЛА

$connect = mysqli_connect(DB,DBLOGIN,DBPASS,DBNAME) or die(mysqli_error());
$res = mysqli_query($connect,"SELECT * FROM capons ORDER BY id") or die (mysqli_error());
if (mysqli_num_rows($res)){
    echo 'На нашем сайте всего'.mysqli_num_rows($res).' пользователей <br>
    А именно:<ul>
    ';
    while($row = mysqli_fetch_assoc($res)){
        echo '<li>Существует пользователь: '.htmlspecialchars($row['login']).'</li>';   //все данные которые выводятся на экран принимаемые от пользователей должны обрабатываться функцией htmlspecialchars
    }
    echo '</ul>';
} else {
    echo 'Нет записей';
}


---А ТАК ВЫВОДИМ И ЕЩЕ И НОМЕРУЕМ ПО ПОРЯДКУ ДАННЫЕ 

$connect = mysqli_connect(DB,DBLOGIN,DBPASS,DBNAME) or die(mysqli_error());
$res = mysqli_query($connect,"SELECT * FROM capons ORDER BY id") or die (mysqli_error());
if (mysqli_num_rows($res)){
    echo 'На нашем сайте всего'.mysqli_num_rows($res).' пользователей <br>
    А именно:<ul>
    ';
    $i=1;
    while($row = mysqli_fetch_assoc($res)){
        echo '<li>'.$i.' '.htmlspecialchars($row['login']).'</li>';   //все данные которые выводятся на экран принимаемые от пользователей должны обрабатываться функцией htmlspecialchars
        ++$i;
    }
    echo '</ul>';
} else {
    echo 'Нет записей';
}